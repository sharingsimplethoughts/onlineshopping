{% load staticfiles %}

{% include 'admin-interface/header.html' %}


<link rel="stylesheet" href="{% static 'css/daterangepicker.min.css' %}">


<script src="{% static 'js/daterangepicker.min.js' %}"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<style type="text/css">
  
.add-membrs{
    position: relative;
}
.add-membrs h5{
text-decoration: underline;
}
.add-membrs ul{
list-style: none;
padding-left: 0px;
}
.add-membrs ul li{
    padding-bottom: 5px;
    width: 49%;
    display: inline-block;
}
.add-membrs .container_check{
   /* display:block;*/
    position:relative;
    float: right;
    padding-top:5px;
    font-size:13px;
    padding-left:35px;
    margin-bottom:12px;
    cursor:pointer;
    -webkit-user-select:none;
    -moz-user-select:none;
    -ms-user-select:none;
    user-select:none;
    margin-right:10px
}
.add-membrs .container_check input{
    position:absolute;
    opacity:0;
   der:1px solid transparent*/
    border: 1px solid #2c3e50;
}
.add-membrs .container_check input:checked ~ .checkmark{
    background-color: #2c3e50;
    border:1px solid transparent;
}
.add-membrs .container_check .checkmark:after{
    conten cursor:pointer;
}
.add-membrs .container_check .checkmark{
    position:absolute;
    top: 6px;
    left: 0;
    height: 16px;
    width: 16px;
    border:1px solid #2c3e50;
    -webkit-border-radius:3px;
    -moz-border-radius:3px;
    -ms-border-radius:3px;
    border-radius:3px;
    -webkit-transition:all 0.2s ease;
    transition:all 0.2s ease;
}
.add-membrs .container_check .checkmark:after {
    content: "";
    position: absolute;
    display: block;
    left: 4px;
    top: 2px;
    width: 5px;
    height: 10px;
    border: solid white;
    border-width: 0 3px 3px 0;
    -webkit-transform: rotate(45deg);
    -ms-transform: rotate(45deg);
    transform: rotate(45deg);
}

/* Date Picker
========================*/

  .datepicker.dropdown-menu {
     width: 237px;
    padding: 1.07143em 1.78571em;
    -webkit-box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.2);
    box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.2);
    right: 0 !important;
    }
  .datepicker tbody {
    color: #666; }
  .datepicker table tr td span.active,
  .datepicker table tr td span.active:hover,
  .datepicker td .month.active {
    background: #1976d2 !important; }
  .datepicker td.active,
  .datepicker td.selected {
    background: #1976d2 !important; }
    .default input[type=text] {
    border: 1px solid #cad6e2;
      border-radius: 5px;
    }
    .default .input-group {
      width: 100%;
      display: block !important;
      height: 30px;
    }
    .default label {
      /*padding: 5px 9px 0px 0px;*/
    }
    .dafault21 {
    /* width: 28%; */
    /* width: 42%; */
    width: 33%;
    height: 20px;
    margin-right: 13px;
    display: inline-block;
}
.default{
    position: relative;
    padding-bottom: 53px;
}
.filter{
    position: relative;
    float: right;
    font-size: 18px;
    font-weight: 400;
/*    border: 1px solid #ddd;
    padding: 0px 27px;*/
}
.fil-cont{
    position: relative;
}
.fil-cont h5{
    padding: 0px;
    margin: 8px 0 5px;
}
.fil-cont ul{
padding-left: 0px;
list-style: none;
margin-top: 0;
}
.fil-cont ul li{
display: inline-block;
width: 30%;
}
.fil-list-grp{
    position: relative;
    padding: 3px 15px 0px !important;
}
.fil-list-grp:hover{
background-color: transparent !important;
    
}

</style>

    <div class="userManagementPage">
        <div class="layout-content">
            <div class="layout-content-body">
                <div class="title-bar">
                    <h1 class="title-bar-title">
                      <span class="d-ib">User Management</span>
                    </h1>
                </div>
                <div class="row gutter-xs">
                    <div class="col-xs-12">
                        <div class="card">
                           
                            <div class="card-body">

                              <div class="row" style="position: relative;">

                                <div class="col-md-8 col-sm-8 col-xs-12" style="position: absolute; top:-0.5%;  z-index: 999;">

                        <form id= filter_date action="/admin/users/date_filter/1"
                                       style="width: 50%; float: left;">
                          <div class="dafault21">
                            <div class="form-group">
                              <div class="input-group">
                                <input  autocomplete="off" type="text" class="form-control datepicker" value="" id="startdate" style="padding: 0 10px 0 25px; border-radius: 0;" name='startdate' placeholder="From">
                                <span class="icon icon-calendar input-icon" style="width: 25px;"></span>
                                <div class="input-group-append">
                                  <div class="input-group-text ml-2">
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="dafault21 tb-to">
                            <div class="form-group">
                                <div class="input-group">
                                    <input type="text" autocomplete="off" class="form-control datepicker" value="" id="enddate" style="padding: 0 10px 0 25px; border-radius: 0;" name='enddate' placeholder="To">
                                    <span class="icon icon-calendar input-icon" style="width: 25px;"></span>
                                    <div class="input-group-append">
                                        <div class="input-group-text ml-2">
                                        </div>
                                    </div>
                                </div>
                            </div>
                          </div>

                          <button  style= "width:40px;height: 34px ;margin-top:0px" class="btn btn-default btn-sm btn-labeled" id ="filter-user" type="submit" data-toggle="modal" disabled="disabled">
                            <span class="add-btn">
                            <i class="fa fa-search"></i>
                            </span>
                          </button>

                        </form>

                        <form id ="filter_form">
                                   <div class="row">
                                      <div class="col-md-6 col-sm-6 col-xs-12">
                                        <div class="filter">
                                          <div class="dropdown">
                                            <a class="dropdown-toggle btn btn-default" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                              <span class="icon-with-child text-right">
                                                  Filter &nbsp;<span class="icon icon-angle-down"></span>
                                              </span>
                                            </a>
                                            <div class="dropdown-menu dropdown-menu-right dropdown-menu-lg">
                                              <div class="dropdown-body" style="height: 100%;">
                                                <div class="custom-scrollable-area" style="position: relative; overflow: hidden; width: 100%; height: 100%;">
                                                     <div class="list-group list-group-divided custom-scrollbar" style="overflow: hidden; width: 100%; height: 100%;">
                                                  <a class="list-group-item fil-list-grp" href="#">
                                                    <div class="notification">
                                                      <div class="notification-content fil-cont">
                                                         <div class="">
                                                            <h5>Device</h5>
                                                            <ul>
                                                              <li>
                                                                 <label class="container_check">
                                                                      <input id ="android" type="checkbox" value="true" >
                                                                      <span class="checkmark"></span>
                                                                   </label>
                                                                   Android
                                                              </li>
                                                              <li>
                                                                 <label class="container_check">
                                                                      <input id ="ios" type="checkbox">
                                                                      <span class="checkmark"></span>
                                                                   </label>
                                                                   Ios
                                                              </li>
                                                               <li>
                                                                 <label class="container_check">
                                                                      <input id ="web"type="checkbox">
                                                                      <span class="checkmark"></span>
                                                                   </label>
                                                                   Web
                                                              </li>
                                                            </ul>
                                                          </div>
                                                      </div>
                                                    </div>  
                                                  </a>
                                                   <a class="list-group-item fil-list-grp" href="#">
                                                    <div class="notification">
                                                      <div class="notification-content fil-cont">
                                                         <div class="">
                                                            <h5>Gender</h5>
                                                            <ul>
                                                              <li>
                                                                 <label class="container_check">
                                                                      <input type="checkbox" id="male">
                                                                      <span class="checkmark"></span>
                                                                   </label>
                                                                   Male
                                                              </li>
                                                              <li>
                                                                 <label class="container_check">
                                                                      <input type="checkbox" id="female">
                                                                      <span class="checkmark"></span>
                                                                   </label>
                                                                   Female
                                                              </li> 
                                                            </ul>

                                                          </div>
                                                      </div>
                                                    </div>  
                                                  </a>
                                                    <a class="list-group-item fil-list-grp" href="#">
                                                    <div class="notification">
                                                      <div class="notification-content fil-cont">
                                                         <div class="">
                                                            <h5>Status</h5>
                                                            <ul>
                                                              <li>
                                                                 <label class="container_check">
                                                                      <input id="active"type="checkbox">
                                                                      <span class="checkmark"></span>
                                                                   </label>
                                                                   Active
                                                              </li>
                                                              <li>
                                                                 <label class="container_check">
                                                                      <input id="inactive" type="checkbox">
                                                                      <span class="checkmark"></span>
                                                                   </label>
                                                                   Inactive
                                                              </li>
                                                            </ul>
                                                          </div>
                                                      </div>
                                                    </div>  
                                                  </a>
                                                      
                                              </div>
                                              </div>
                                            </div>
                                            </div>
                                        </div>
                                      </div>
                                   </div>
                                 </div>  
                                </form>
                      </div>


                              <div class="table-responsive col-md-12 col-sm-12 col-xs-12">
                                <table id="demo-datatables-5" class="table table-striped table-bordered table-nowrap dataTable" cellspacing="0" width="100%">
                                    <thead>
                                       <tr>
                                            <th class="clicksr cl_dis">Sr. No.</th>
                                            <th >Name</th>
                                            <th class="cl_dis">Email-ID</th>
                                            <th class="cl_dis">Mobile</th>
                                            
                                            <th class="cl_dis">Gender</th>
                                            <th class="cl_dis">Device</th>
                                            <th class="cl_dis">Status</th>
                                            <th class="cl_dis">View profile</th>
                                            
                                            <th class="cl_dis">Action</th>
                                        </tr>
                                    </thead>

                                    <tbody id = 'userlist'>

<!--                                      {% for user in users %}-->
<!--                                        <tr id = 'usertr'>-->
<!--                                            <td>{{forloop.counter}}</td>-->
<!--                                            <td>{{user.user.first_name}} {{user.user.last_name}}</td>-->
<!--                                            <td>{{user.user.email}}</td>-->
<!--                                            <td>{{user.phonenum}}</td>-->
<!--                                            <td>{{user.get_gender_display}}</td>-->
<!--                                            <td>{{user.get_device_type_display}}</td>-->
<!--                                            {% if user.user.is_active %}-->
<!--                                            <td class="text-success">Active</td>-->
<!--                                            {% else %}-->
<!--                                            <td class="text-danger">Inactive</td>-->
<!--                                            {% endif %}-->
<!--                                            <td>-->
<!--                                                <button class="btn btn-primary btn-sm btn-labeled" type="button" data-toggle="modal" id ="{{ user.id }}"  data-target="#viewSeller" onClick="location='/admin/users/user_detail/{{ user.id }}'">-->
<!--                                                    <span class="btn-label">-->
<!--                                                     <span class="icon icon-eye icon-lg icon-fw"></span>-->
<!--                                                    </span>-->
<!--                                                    View Profile-->
<!--                                                </button>-->
<!--                                            </td>-->
<!--                                            <td>-->



<!--                                               <button class="btn btn-danger btn-sm btn-labeled" type="button" data-toggle="modal"  id ="{{ user.id }}"  data-target="#deleteUser"  onclick="deleteuser(this.id)">-->
<!--                                                    <span class="btn-label">-->
<!--                                                     <span class="icon icon-trash icon-lg icon-fw"></span>-->
<!--                                                    </span>-->
<!--                                                  </button>-->

<!--                                             {% if user.user.is_active %}-->
<!--                                                <button class="btn btn-warning btn-sm btn-labeled" type="button" data-toggle="modal"  id ="{{ user.id }}" data-target="#blockUser" onclick="blockuser(this.id)">-->
<!--                                                    <span class="btn-label">-->
<!--                                                     <span class="icon fa-ban icon-lg icon-fw"></span>-->
<!--                                                    </span>-->
<!--                                                   </button>-->

<!--                                              {% else %}-->

<!--                                              <button class="btn btn-success btn-sm btn-labeled" type="button" data-toggle="modal" id ="{{ user.id }}" data-target="#unblockUser" onclick="unblockuser(this.id)" >-->
<!--                                                    <span class="btn-label">-->
<!--                                                     <span class="icon icon-check icon-lg icon-fw"></span>-->
<!--                                                    </span>-->
<!--                                                   </button>-->
<!--                                                   {% endif %}-->
<!--                                            </td>-->
<!--                                        </tr>-->

<!--                                        {% endfor %}-->
                                    </tbody>
                                </table>
                            </div>
                            </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

{% include 'admin-interface/footer.html' %}

    <div id="unblockUser" tabindex="-1" role="dialog" class="modal fade">
     <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">
              <span aria-hidden="true">×</span>
              <span class="sr-only">Close</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="text-center">
              <span class="text-success icon icon-times-circle icon-5x"></span>
              <h3 class="text-success">Sure</h3>
              <h4>Are you sure, you want to unblock this User?</h4>
              <div class="m-t-lg">
                <button class="btn btn-success" id="unblockuser_id"  userid = "" onclick="unblockUserFunction()" data-dismiss="modal" type="button">Continue</button>
                <button class="btn btn-default" data-dismiss="modal" type="button">Cancel</button>
              </div>
            </div>
          </div>
          <div class="modal-footer"></div>
        </div>
      </div>      
    </div>

     <div id="blockUser" tabindex="-1" role="dialog" class="modal fade">
     <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">
              <span aria-hidden="true">×</span>
              <span class="sr-only">Close</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="text-center">
              <span class="text-danger icon icon-times-circle icon-5x"></span>
              <h3 class="text-danger">Block</h3>
              <h4>Are you sure, you want to block this User</h4>
              <div class="m-t-lg">
                <button class="btn btn-danger" id="blockuser_id" data-dismiss="modal" type="button"  userid = "" onclick="blockUserFunction()" />Continue</button>
                <button class="btn btn-default" data-dismiss="modal" type="button">Cancel</button>
              </div>
            </div>
          </div>
          <div class="modal-footer"></div>
        </div>
      </div>      
    </div>
    


    <div id="deleteUser" tabindex="-1" role="dialog" class="modal fade">
     <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">
              <span aria-hidden="true">×</span>
              <span class="sr-only">Close</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="text-center">
              <span class="text-danger icon icon-times-circle icon-5x"></span>
              <h3 class="text-danger">Delete</h3>
              <h4>Are you sure, you want to delete this User?</h4>
              <div class="m-t-lg">
                <button class="btn btn-danger" id="deleteuser_id" data-dismiss="modal" type="button" userid = "" onclick="deleteUserFunction()" />Continue</button>
                <button class="btn btn-default" data-dismiss="modal" type="button">Cancel</button>
              </div>
            </div>
          </div>
          <div class="modal-footer"></div>
        </div>
      </div>      
    </div>



<script type="text/javascript">
         $(document).ready(function(){
            $("#startdate").datepicker({
                todayBtn:  1,
                autoclose: true,
            }).on('changeDate', function (selected) {
                var minDate = new Date(selected.date.valueOf());
                $('#enddate').datepicker('setStartDate', minDate);
            });

            $("#enddate").datepicker({
                todayBtn:  1,
                autoclose: true,
            }).on('changeDate', function (selected) {
                 var maxDate = new Date(selected.date.valueOf());
                 $('#startdate').datepicker('setEndDate', maxDate);
            });
        });
 

</script>



<!--<script src="{% static 'js/pagination.js' %}" type="text/javascript"></script>-->
<script type="text/javascript">




function myFunction(clicked_id) {
    $.ajax(
    {
        type:"GET",
        url: "/api/v1/users/list/"+clicked_id,

        success: function( data ) 
        {   console.log(data.about)
          console.log(data)
          console.log(data.userotherinfo.first_name)
            document.getElementById("name").innerHTML = data.userotherinfo.first_name+' ' +data.userotherinfo.last_name;
            
            if(data.profileimg !=null){
                document.getElementById("image").src = data.profileimg;
            }
            document.getElementById("about").innerHTML = data.about;
            document.getElementById("gender").innerHTML = data.gender;
            document.getElementById("phonenumber").innerHTML = data.phonenum;
            document.getElementById("email").innerHTML = data.userotherinfo.email;
            if( data.addr_one == null ) {
            document.getElementById("region").textContent='N/A'
            
            }else{
            document.getElementById("region").innerHTML = data.addr_one
             }
         
        }
     })
};

function viewprofile(clicked_id){
   window.location = '/admin/users/user_detail/'+clicked_id;

}

function deleteuser(clicked_id){
  console.log(clicked_id)
  document.getElementById('deleteuser_id').setAttribute('userid',clicked_id) 

};

function blockuser(clicked_id){
  console.log(clicked_id)
  document.getElementById('blockuser_id').setAttribute('userid',clicked_id) 

};
function unblockuser(clicked_id){
  console.log(clicked_id)
  document.getElementById('unblockuser_id').setAttribute('userid',clicked_id) 

};



function getCookie(cname) {
  var name = cname + "=";
  var decodedCookie = decodeURIComponent(document.cookie);
  var ca = decodedCookie.split(';');
  for(var i = 0; i <ca.length; i++) {
    var c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}


function deleteUserFunction(){
    var id  = document.getElementById('deleteuser_id').getAttribute("userid");
    $.ajax(
    {
        type:"POST",
        url: "/api/v1/users/delete/"+id,
        headers: { "X-CSRFToken":getCookie("csrftoken") },
      
      success: function( data ) 
        {   

            alert(data.message)
            window.location.reload();
         
        },

      statusCode: {
        404: function(response) {
            console.log('ajax.statusCode: 404');
            alert('404')
        },
        500: function(response) {
            alert('500')
        },
        400: function(response) {
            alert('400')
        },
    }
       
     })
   
  };

function blockUserFunction(){
    var id  = document.getElementById('blockuser_id').getAttribute("userid");
    $.ajax(
    {
        type:"POST",
        url: "/api/v1/users/block/"+id,
        headers: { "X-CSRFToken":getCookie("csrftoken") },
      
      success: function( data ) 
        {   

            alert(data.message)
            window.location.reload();        
        },

      statusCode: {
        404: function(response) {
            alert('404')
        },
        500: function(response) {
            alert('500')
        },
        400: function(response) {
            alert('400')
        },
    }
       
     })
   

  };

function unblockUserFunction(){
    var id  = document.getElementById('unblockuser_id').getAttribute("userid");
    $.ajax(
    {
        type:"POST",
        url: "/api/v1/users/unblock/"+id,
        headers: { "X-CSRFToken":getCookie("csrftoken") },
      
      success: function( data ) 
        {   

            alert(data.message)
            window.location.reload();        
        },

      statusCode: {
        404: function(response) {
            alert('404')
        },
        500: function(response) {
            alert('500')
        },
        400: function(response) {
            alert('400')
        },
    }
       
     })
   

  };

$(document).ready(function(){

$('#filter_form').change(function() {
<!--$("#demo-datatables-5").removeClass('dataTable')-->

    console.log('change')
    var active = $("#active").is(':checked');
    var inactive = $("#inactive").is(':checked');
    var male    = $("#male").is(':checked');
    var female  = $("#female").is(':checked');
    var android = $("#android").is(':checked');
    var web     = $("#web").is(':checked');
    var ios     = $("#ios").is(':checked');
    var one_star = $("#1").is(':checked');
    var two_star = $("#2").is(':checked');
    var three_star = $("#3").is(':checked');
    var four_star = $("#4").is(':checked');
    var five_star = $("#5").is(':checked');


    console.log(male,female,android,ios,web,one_star,two_star,three_star,four_star,five_star,active,inactive)
<!--    $('#demo-datatables-5').pagination({-->
<!--         dataSource: function(done) {-->
<!--         $.ajax(-->
<!--      {-->
<!--        type:"POST",-->
<!--        url: "/api/v1/users/filter/1",-->
<!--        headers: { "X-CSRFToken":getCookie("csrftoken") },-->

<!--        data:JSON.stringify({   'active': active,-->
<!--                  'inactive' : inactive,-->
<!--                  'male' : male,-->
<!--                  'female' : female,-->
<!--                  'android' : android,-->
<!--                  'web' : web,-->
<!--                  'ios' : ios,-->
<!--                  'one_star' : one_star,-->
<!--                  'two_star' : two_star,-->
<!--                  'three_star' : three_star,-->
<!--                  'four_star' : four_star,-->
<!--                  'five_star' : five_star-->
<!--              }),-->

<!--        contentType: 'application/json; charset=utf-8',-->
<!--        dataType: 'json',-->

<!--        success: function( response )-->
<!--        {-->
<!--            done(response);-->
<!--            },statusCode: {-->
<!--        404: function(response) {-->
<!--            alert('404')-->
<!--        },-->
<!--        500: function(response) {-->
<!--            alert('500')-->
<!--        },-->
<!--        400: function(response) {-->
<!--            alert('400')-->
<!--        },-->
<!--        }-->

<!--        });-->
<!--     },-->
<!--    callback: function(data, pagination) {-->
<!--        // template method of yourself-->
<!--        console.log(data)-->
<!--            $('#userlist').empty()-->


<!--            for (i = 0; i < (data.length); i++) {-->
<!--                console.log(i)-->
<!--                var phonenumber = data[i].phonenum;-->
<!--                var name = data[i].userotherinfo.first_name + ' ' +data[i].userotherinfo.last_name;-->
<!--                var email = data[i].userotherinfo.email;-->
<!--                var gender_small = data[i].gender;-->
<!--                if(gender_small != null){-->
<!--                    var gender = gender_small.charAt(0).toUpperCase() + gender_small.slice(1)-->
<!--                 }else{-->
<!--                    var gender = gender_small-->
<!--                 }-->
<!--                var device_small = data[i].device_type;-->
<!--                if (device_small=='ios'){-->
<!--                  var device = device_small.toUpperCase()-->
<!--                }else{-->
<!--                    var device = device_small.charAt(0).toUpperCase() + device_small.slice(1)-->

<!--                }-->
<!--                var status = data[i].userotherinfo.is_active;-->
<!--                var id = data[i].id;-->

<!--                var sr = data.length-i;-->
<!--                if(status==true){-->
<!--                  var status='Active';-->
<!--                  var cssclass = 'success';-->
<!--                  var functionname = 'blockuser(this.id)';-->
<!--                  var icon = 'fa-ban icon-lg';-->
<!--                  var cssclass2 = 'btn-warning';-->
<!--                  var data_target = '#blockUser';-->
<!--                }-->
<!--                else{-->
<!--                  var status ='Inactive';-->
<!--                  var cssclass = 'danger';-->
<!--                  var functionname = 'unblockuser(this.id)';-->
<!--                  var icon = 'icon-check icon-lg';-->
<!--                  var cssclass2 = 'btn-success';-->
<!--                  var data_target = '#unblockUser'-->

<!--                }-->

<!--                console.log(data[i].userotherinfo.is_active)-->
<!--                  console.log(phonenumber,name,email,status,sr,id)-->

<!--                var html =  '<tr id="usertr">'+-->
<!--                                            '<td class="cl_dis">'+sr+'</td>'+-->
<!--                                            '<td class="cl_dis">'+name+'</td>'+-->
<!--                                            '<td class="cl_dis">'+email +'</td>'+-->
<!--                                            '<td class="cl_dis">'+phonenumber+'</td>'+-->
<!--                                            '<td class="cl_dis">'+gender+'</td>'+-->
<!--                                            '<td class="cl_dis">'+device+'</td>'+-->
<!--                                            '<td class="text-'+cssclass+' cl_dis">'+status+'</td>'+-->

<!--                                          '<td>'+-->
<!--                                                '<button class="btn btn-primary btn-sm btn-labeled" type="button" data-toggle="modal" id ="'+id+-->
<!--                                                '" data-target="#viewSeller" onclick="viewprofile(this.id)">'+-->
<!--                                                    '<span class="btn-label">'+-->
<!--                                                     '<span class="icon icon-eye icon-lg icon-fw"></span>'+-->
<!--                                                    '</span>'+-->
<!--                                                    'View Profile'+-->
<!--                                                '</button>'+-->
<!--                                            '</td>'+-->


<!--                                      '<td>'+-->
<!--                                          '<button class="btn btn-danger btn-sm btn-labeled" type="button" data-toggle="modal"  id ="'+id+'"  data-target="#deleteUser"  onclick="deleteuser(this.id)">'+-->
<!--                                                    '<span class="btn-label">'+-->
<!--                                                     '<span class="icon icon-trash icon-lg icon-fw"></span>'+-->
<!--                                                    '</span>'+-->
<!--                                                  '</button>'+-->

<!--                                         '<button class="btn ' +cssclass2 +' btn-sm btn-labeled" type="button" data-toggle="modal"  id ="'+id+'" data-target="'+data_target+'" onclick="'+functionname+'">'+-->
<!--                                                    '<span class="btn-label">'+-->
<!--                                                     '<span class="icon '+ icon +-->
<!--                                                     ' icon-fw">'+'</span>'+-->
<!--                                                    '</span>'+-->
<!--                                                   '</button>'+-->


<!--                                      '</td>'+-->

<!--                                    '</tr>'-->


<!--$('#userlist').prepend(html)-->
<!--              }-->
<!--    }-->
<!--    })-->
<!--    console.log('my data', data)-->

<!--var table = $('#demo-datatables-5').DataTable()-->
<!--var tds = []-->
    $.ajax(
      {
        type:"POST",
        url: "/api/v1/users/filter/1",
        headers: { "X-CSRFToken":getCookie("csrftoken") },

        data:JSON.stringify({   'active': active,
                  'inactive' : inactive,
                  'male' : male,
                  'female' : female,
                  'android' : android,
                  'web' : web,
                  'ios' : ios,
                  'one_star' : one_star,
                  'two_star' : two_star,
                  'three_star' : three_star,
                  'four_star' : four_star,
                  'five_star' : five_star
              }),

        contentType: 'application/json; charset=utf-8',
        dataType: 'json',

      success: function( data )
        {
            tds = []
            console.log(data)
            $('#userlist').empty()

<!--$.each($('tr:last td', this), function () {-->
<!--             tds.push($(this).html());-->
<!--         });-->
            for (i = 0; i < (data.length); i++) {
                console.log(i)
                var phonenumber = data[i].phonenum;
                var name = data[i].userotherinfo.first_name + ' ' +data[i].userotherinfo.last_name;
                var email = data[i].userotherinfo.email;
                var gender_small = data[i].gender;
                if(gender_small != null){
                    var gender = gender_small.charAt(0).toUpperCase() + gender_small.slice(1)
                 }else{
                    var gender = gender_small
                 }
                var device_small = data[i].device_type;
                if (device_small=='ios'){
                  var device = device_small.toUpperCase()
                }else{
                    var device = device_small.charAt(0).toUpperCase() + device_small.slice(1)

                }
                var status = data[i].userotherinfo.is_active;
                var id = data[i].id;

                var sr = data.length-i;
                if(status==true){
                  var status='Active';
                  var cssclass = 'success';
                  var functionname = 'blockuser(this.id)';
                  var icon = 'fa-ban icon-lg';
                  var cssclass2 = 'btn-warning';
                  var data_target = '#blockUser';
                }
                else{
                  var status ='Inactive';
                  var cssclass = 'danger';
                  var functionname = 'unblockuser(this.id)';
                  var icon = 'icon-check icon-lg';
                  var cssclass2 = 'btn-success';
                  var data_target = '#unblockUser'

                }

                console.log(data[i].userotherinfo.is_active)
                  console.log(phonenumber,name,email,status,sr,id)

                var html =  '<tr id="usertr">'+
                                            '<td class="cl_dis">'+sr+'</td>'+
                                            '<td class="cl_dis">'+name+'</td>'+
                                            '<td class="cl_dis">'+email +'</td>'+
                                            '<td class="cl_dis">'+phonenumber+'</td>'+
                                            '<td class="cl_dis">'+gender+'</td>'+
                                            '<td class="cl_dis">'+device+'</td>'+
                                            '<td class="text-'+cssclass+' cl_dis">'+status+'</td>'+

                                          '<td>'+
                                                '<button class="btn btn-primary btn-sm btn-labeled" type="button" data-toggle="modal" id ="'+id+
                                                '" data-target="#viewSeller" onclick="viewprofile(this.id)">'+
                                                    '<span class="btn-label">'+
                                                     '<span class="icon icon-eye icon-lg icon-fw"></span>'+
                                                    '</span>'+
                                                    'View Profile'+
                                                '</button>'+
                                            '</td>'+


                                      '<td>'+
                                          '<button class="btn btn-danger btn-sm btn-labeled" type="button" data-toggle="modal"  id ="'+id+'"  data-target="#deleteUser"  onclick="deleteuser(this.id)">'+
                                                    '<span class="btn-label">'+
                                                     '<span class="icon icon-trash icon-lg icon-fw"></span>'+
                                                    '</span>'+
                                                  '</button>'+

                                         '<button class="btn ' +cssclass2 +' btn-sm btn-labeled" type="button" data-toggle="modal"  id ="'+id+'" data-target="'+data_target+'" onclick="'+functionname+'">'+
                                                    '<span class="btn-label">'+
                                                     '<span class="icon '+ icon +
                                                     ' icon-fw">'+'</span>'+
                                                    '</span>'+
                                                   '</button>'+


                                      '</td>'+

                                    '</tr>'

<!--tds.push(html)-->
<!--console.log(tds)-->
<!--table.row.add(html).draw(true)-->
$('#userlist').prepend(html)

              }
<!--$('#demo-datatables-5').addClass('dataTable')-->
<!--$('table#demo-datatables-5').each(function () {-->
<!--console.log('repaginate')-->
<!--  $(this).trigger('repaginate');-->
<!--});-->

        },


      statusCode: {
        404: function(response) {
            alert('404')
        },
        500: function(response) {
            alert('500')
        },
        400: function(response) {
            alert('400')
        },
    }

     })
<!--setTimeout(function(){  }, 100);-->
})
$("#filter_form").trigger("change")

<!--$("#demo-datatables-5").addClass('dataTable')-->
})


$(document).ready(function(){

$(".clicksr").click();

$('#filter_date').change(function() {

    if ($('#startdate').val() != '' && $('#enddate').val() != '' ){
      

      $('#filter-user').prop('disabled', false);



            }
      else{

        $('#filter-user').prop('disabled', true);
      }


})
})

</script>


<script>
  $(document).ready(function(){
    //alert('hello');
    $(".cl_dis").off("click");
    $(".cl_dis").removeClass("sorting");
    $(".cl_dis").removeClass("sorting_asc");
    $(".cl_dis").removeClass("sorting_desc");



    $(".cl_dis").click(function(){
      $(this).off("click");
    });

    $("thead").on("click", function() {
      //alert('started');

      $(".cl_dis").off("click");

      $(".cl_dis").removeClass("sorting");
      $(".cl_dis").removeClass("sorting_asc");
      $(".cl_dis").removeClass("sorting_desc");

    });
  });
</script>
